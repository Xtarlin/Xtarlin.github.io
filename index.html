<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Solicitud de Visado</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
    <main class="container" role="main">
        <h1>Formulario de Solicitud de Visado</h1>
        <p class="intro-text">Por favor, complete este formulario con la información más precisa posible para su solicitud de visado.</p>
        <!-- Progress Bar -->
        <div class="progress-bar-container" aria-label="Progreso del formulario">
            <div class="progress-bar-fill" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" role="progressbar"></div>
            <span class="progress-bar-text" id="progressBarText">0% Completo</span>
        </div>

        <form id="visaApplicationForm" novalidate aria-label="Formulario de visado">
            <!-- Country Selection -->
            <fieldset class="form-card country-selection-fieldset">
                <legend>Selección de País</legend>
                <div class="form-group">
                    <label for="visaTypeUSA">¿Para qué país desea solicitar el visado?</label>
                    <div class="radio-group">
                        <input type="radio" id="visaTypeUSA" name="visaType" value="USA" aria-labelledby="labelUSA" required>
                        <label for="visaTypeUSA" id="labelUSA" class="country-option-label">
                            <span class="flag" role="img" aria-label="Estados Unidos">🇺🇸</span> Estados Unidos
                        </label>
                        <input type="radio" id="visaTypeCanada" name="visaType" value="Canada" aria-labelledby="labelCanada" required>
                        <label for="visaTypeCanada" id="labelCanada" class="country-option-label">
                            <span class="flag" role="img" aria-label="Canadá">🇨🇦</span> Canadá
                        </label>
                    </div>
                    <div id="countrySelectionError" class="error-message" role="alert" aria-live="polite" style="display: none;">Por favor, seleccione un país.</div>
                </div>
            </fieldset>

            <!-- USA Form Section (Initially hidden) -->
            <section id="usaFormSections" hidden aria-label="Formulario para Estados Unidos">
                <h2>Información Personal (EE. UU.)</h2>
                <fieldset class="form-card">
                    <legend>Datos Personales</legend>
                    <div class="form-group">
                        <label for="usa.personalInfo.surname">Apellidos:</label>
                        <input type="text" id="usa.personalInfo.surname" name="usa.personalInfo.surname" required data-validation-type="text" autocomplete="family-name">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                    <div class="form-group">
                        <label for="usa.personalInfo.givenName">Nombres:</label>
                        <input type="text" id="usa.personalInfo.givenName" name="usa.personalInfo.givenName" required data-validation-type="text" autocomplete="given-name">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                    <div class="form-group">
                        <label for="usa.personalInfo.dob">Fecha de Nacimiento:</label>
                        <input type="date" id="usa.personalInfo.dob" name="usa.personalInfo.dob" required data-validation-type="date" autocomplete="bday">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                    <div class="form-group">
                        <label for="usa.personalInfo.pobCity">Ciudad de Nacimiento:</label>
                        <input type="text" id="usa.personalInfo.pobCity" name="usa.personalInfo.pobCity" required data-validation-type="text">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                </fieldset>
            </section>

            <!-- Canada Form Section (Initially hidden) -->
            <section id="canadaFormSections" hidden aria-label="Formulario para Canadá">
                <h2>Información Personal (Canadá)</h2>
                <fieldset class="form-card">
                    <legend>Datos Personales</legend>
                    <div class="form-group">
                        <label for="canada.personalInfo.surname">Apellidos:</label>
                        <input type="text" id="canada.personalInfo.surname" name="canada.personalInfo.surname" required data-validation-type="text" autocomplete="family-name">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                    <div class="form-group">
                        <label for="canada.personalInfo.givenName">Nombres:</label>
                        <input type="text" id="canada.personalInfo.givenName" name="canada.personalInfo.givenName" required data-validation-type="text" autocomplete="given-name">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                    <div class="form-group">
                        <label for="canada.personalInfo.dob">Fecha de Nacimiento:</label>
                        <input type="date" id="canada.personalInfo.dob" name="canada.personalInfo.dob" required data-validation-type="date" autocomplete="bday">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                    <div class="form-group">
                        <label for="canada.personalInfo.pobCity">Ciudad de Nacimiento:</label>
                        <input type="text" id="canada.personalInfo.pobCity" name="canada.personalInfo.pobCity" required data-validation-type="text">
                        <div class="error-message" aria-live="polite"></div>
                    </div>
                </fieldset>
            </section>

            <div class="form-actions">
                <button type="button" id="saveProgressBtn" class="primary-btn" aria-label="Guardar progreso">Guardar progreso</button>
                <button type="button" id="reviewAndSubmitBtn" class="secondary-btn" aria-label="Revisar y enviar">Revisar y enviar</button>
            </div>
        </form>
    </main>

    <!-- Modal de Mensajes Generales -->
    <div id="customModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
        <div class="modal-content">
            <span class="close-button" id="modalCloseBtn" tabindex="0" aria-label="Cerrar">&times;</span>
            <h2 id="modalTitle"></h2>
            <p id="modalMessage"></p>
        </div>
    </div>

    <!-- Modal de Resumen -->
    <div id="summaryModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="summaryTitle" aria-hidden="true">
        <div class="modal-content">
            <span class="close-button" id="summaryCloseButton" tabindex="0" aria-label="Cerrar">&times;</span>
            <h2 id="summaryTitle">Resumen de su solicitud</h2>
            <div id="summaryContent"></div>
            <button id="editFormBtn" class="secondary-btn" aria-label="Editar formulario">Editar</button>
            <button id="confirmAndDownloadBtn" class="primary-btn" aria-label="Confirmar y descargar">Confirmar y descargar</button>
        </div>
    </div>

    <footer>
        <p>© 2025 Xtarlin. Todos los derechos reservados.</p>
    </footer>
    <script src="script.js"></script>
</body>
</html>
